# تقویم کردن

ایجاد یک تقویم با لایبرای های دیگه سطح دسترسی رو پایین و پیچیده تر میکنه. کل داستان اینکه شما حداقل یک تابع دارید که بهش سال و ماه رو بهش میدید و اون بهتون یه آرایه تک بعدی از تقویم اون ماه در اون سال میده. اینطوری دست شما هم برای پردازش و هر کاری در هر دیوایسی بازه.  
خب فعلا ما از دو تاریخ `شمسی` و ‍`میلادی` پشتیبانی می کنیم. به چه شکل ؟ از یک لایبراری برای تاریخ شمسی استفاده کردم و فقط فورمت و قالب تاریخ رو تعیین کردم و گفتم هر وقت این سال و ماه بیاد یعنی جلالیه و فرمت تاریخت و اعدادت می بایست جلالی باشه. همین طور برای میلادی هم پیش میاد.

## شروع کار

من فکر میکنم اصلا ساخت تقویم یک پروژه ساده باشه که حتی برای برنامه نویس های تازه کار هم راحت بشه از این پکیج استفاده بشه و برای همین من از نه خیلی صفر شروع می کنم به توضیح.

### نصب پکیج

توی این زمینه ما می تونیم از طریق `npm` اقدام به دریافت به پکیج جاوا اسکریپتی خودمون بشیم.

```
npm i calendaring
```

خیلی ها شاید از `yarn` برای مدیریت بسته ها شون استفاده کنند که اونم به این شکل هستش.

```
yarn add calendaring
```

زمان نصب وابسته به اینترنت شخص شما می باشد و من هیچ حقوقی در این زمینه رو نمیخوام قبول کنم و بعدش می مونه فقط اون لایبرای پردازش جلالی که استفاده کردم که چون برای من نیست ، من باز هم هیچ حقوقی در این زمینه رو نمی خواهم قبول کنم مگر بگیم که لایبری بهتری هست و بخوایم کوچ کنیم بهش‌ :)

### استفاده کردن از پکیج

این پکیج رو من با `typescript` نوشتم. نمی دونم چقدر از بچه های ایران درک دارن که پروژه اشون رو با این بنویسن. حالا کاری بهش نداریم ولی پشتیبانی شده این موضوع رو بدونید.  
برای استفاده بستگی داره به شرایط کد نویسی خودتون و مفسری که دارید ازش استفاده می کنید.

#### قدم اول - ایمپورت کردن پکیج

من دو راه بهتون نشون میدم. یکی با `import` و دومی با `require` هستش.

```typescript
import { Calendaring } from "calendaring";

const { Calendaring } = require("calendaring");
```

#### قدم دوم - بابا رو بساز

شی گرایی در این پکیج استفاده شده برای توسعه بهتر. شاید به مزاج خیلی هم خوش نیاد. اما خب باید یه اینستنس ازش بسازیم برای شروع.

```typescript
const calendaring = new Calendaring();
```

#### قدم سوم - اجرا تابع

به صورت پیشفرض تقویم برای **میلادی** ساخته میشه و به تابع تبدیل به _جلالی_ هم میرسیم

```typescript
const { count, length, array } = calendaring.Generate(2022, 3);
```

خروجی این تابع ۳ تا متغیر یا آبجته.

- count از نوع Number که تعداد کل روز های اون ماه رو میگه
- length از نوع Number که طول آرایه رو میده اما توجه کنید که یه الگوریتمی داره پشتش که ایندکس اولین روز ماه در هفته رو با تعداد روز های ماه جمع بسته میشه و میشه طول آرایه
- array از نوع ICalendaringDay[] که یه آبجکتی هستش که پایین توضیح میدم ولی توش عدد روز و دیتا و اطلاعات اون روز ذخیره میشه که دیتا کاستوم توسط شما تعریف میشه

### قدم چهارم - اجرا تابع با داده

توی تقویم شما میخواید مثلا رویداد اون روز رو داشته باشید. برای این کار عدد اون روز رو توی آبجکت یا جیسون به عنوان کلیدش دارید و مقدار اون رو هر دیتایی دوست دارید میذارید که توی آرایه تقویم باشه.  
مثلا ما میخوایم یه تقویم بسازیم که رویداد های روز های ۱۰ام و ۲۷ام ماه مارس ۲۰۲۲ رو داشته باشه.

```typescript
const events = {
  10: ["End of my project"],
  27: ["My best friend for ever birthday"],
};

const { array } = calendaring.Generate(2022, 3, events);
```

حالا خروجی چیه ؟

```typescript
[
    { day: 0, value: null },
    { day: 1, value: null },
    ...
    { day: 10, value: ["End of my project"] },
    { day: 27, value: ["My best friend for ever birthday"] },
    ...
    { day: 31, value: null },
]
```
فکر کنم فهمیده باشید الگوریتم پشتش چیه :)

#### قدم پنجم - تغییر تاریخ
خب کلی از پشتیبانی از جلالی یا همون شمسی خودمون گفتیم ، چطور بین این دو تا تاریخ سویچ کنیم ؟  
یک تابع داریم که بهش میگید می خواید تاریخ چی باشه.

برای تبدیل تقویم به جلالی
```typescript
calendaring.SetFormatter('jalali')
```

برای تبدیل تقویم به میلادی
```typescript
calendaring.SetFormatter('gregorian')
```

توجه کنید که بعدش باید دوباره تابع `Generate` رو صدا بزنید با سال و ماه و دیتای متفاوت.
